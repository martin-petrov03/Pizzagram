(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{52:function(e,t,a){e.exports=a(84)},57:function(e,t,a){},59:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),o=a.n(c),s=a(17),l=(a(57),a(22)),i=a(8),u=(a(58),a(99)),m=a(3),p=a.n(m);a(59);var d=function(){return r.a.createElement("footer",{className:"main-footer"},r.a.createElement("div",{className:"left-side"},r.a.createElement("h2",null,"Pizzas"),r.a.createElement("h4",{className:"description"},"You can choose from our best pizzas and may be create your own!")),r.a.createElement("div",{className:"right-side"},r.a.createElement("h2",null,"Contacts"),r.a.createElement("span",{className:"material-icons"},"email"),r.a.createElement("span",{className:"material-icons"},"call"),r.a.createElement("h3",{className:"contact-item"},"pizzeria@gmail.com"),r.a.createElement("h3",null,"(541) 754-3010")))},b=a(9),f=a.n(b),h=a(23),g=a(20),E=a.n(g),v="https://pizzaria-app.herokuapp.com/",O=v,j=p.a.get("userId"),y=p.a.get("token");E.a.defaults.headers={"Content-Type":"application/json",token:y,userId:j};var w={load:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get(O+"products/all");case 2:if(200!==(t=e.sent).status){e.next=5;break}return e.abrupt("return",{products:t.data.products,likedProducts:t.data.likedProducts});case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),like:function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.post(O+"products/like/"+t);case 3:a=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0.response.status);case 9:return e.abrupt("return",a.status);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),delete:function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.post(O+"products/delete/"+t);case 3:a=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0.response.status);case 9:return e.abrupt("return",a.status);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),add:function(){var e=Object(h.a)(f.a.mark((function e(t,a,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.post(O+"products/add",{name:t,url:n,description:a});case 3:r=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 9:return e.abrupt("return",r.status);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a,n){return e.apply(this,arguments)}}()},k=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)([]),m=Object(i.a)(l,2),b=m[0],f=m[1],h=Object(n.useState)(!1),g=Object(i.a)(h,2),E=g[0],v=g[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],k=j[1];Object(n.useEffect)((function(){w.load().then((function(e){var t=e.products,a=e.likedProducts;o(t),f(a),k(!1)}))}),[]);var P=function(t){var a=t.target.getAttribute("productid");p.a.get("token")?(!function(e){var t=c;t.forEach((function(t){t._id===e&&t.likes++})),o(t)}(a),w.like(a).then((function(){var e=p.a.get("likedProductsIds");e.length?e+=" ".concat(a):e=a,p.a.set("likedProductsIds",e),v(!0)}))):e.history.push("/login")},N=function(t){var a=t.target.getAttribute("productid");w.delete(a).then((function(){var e=[];c.forEach((function(t){t._id!==a&&e.push(t)})),o(e)})).catch((function(t){t.tokenIsOutDated&&e.history.push("/login")}))};return y?r.a.createElement("main",{className:"main-container"},r.a.createElement(u.a,{className:"loader"})):c.length?r.a.createElement("div",{className:"home-page"},p.a.get("token")?r.a.createElement(s.b,{to:"/product/add",className:"add-link"},r.a.createElement("span",{className:"material-icons"},"add_box")):null,r.a.createElement("main",{className:"main-container"},c.map((function(e){return r.a.createElement("div",{className:"product-item",key:e._id},r.a.createElement("img",{src:e.url,alt:e.name}),r.a.createElement("h2",{className:"title"},e.name),r.a.createElement("p",{className:"description"},e.description),r.a.createElement("div",{className:"actions"},r.a.createElement("span",{className:"likes-count"},"Likes: ",e.likes),function(e){var t="material-icons like-icon";return b.includes(e)&&(t="material-icons liked-icon"),E&&(v(!1),t="material-icons liked-icon"),r.a.createElement("i",{className:t,onClick:P,productid:e},"favorite")}(e._id),e.author===p.a.get("userId")?r.a.createElement("i",{className:"material-icons delete-icon",onClick:N,productid:e._id},"delete"):null))})),r.a.createElement("br",null)),r.a.createElement(d,null)):r.a.createElement("div",{className:"home-page"},p.a.get("token")?r.a.createElement(s.b,{to:"/product/add",className:"add-link"},r.a.createElement("span",{className:"material-icons"},"add_box")):null,r.a.createElement("h2",{className:"main-message"},"No Products!"),r.a.createElement("br",null))},P=a(18),N=a(102),x=a(101),S=a(100);var I=function(e){return r.a.createElement("div",null,r.a.createElement("h3",{className:"error-message"},e.error),r.a.createElement("br",null))},D=a(46),C=a(47),F=a(49),A=a(48),z=a(50);function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R=Object(n.createContext)(),U=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(F.a)(this,(e=Object(A.a)(t)).call.apply(e,[this].concat(r)))).state={isAuthenticated:!1},a.logout=function(){a.setState({isAuthenticated:!1})},a.login=function(){a.setState({isAuthenticated:!0})},a}return Object(z.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return r.a.createElement(R.Provider,{value:_({},this.state,{logout:this.logout,login:this.login})},this.props.children)}}]),t}(n.Component),J=v,T=p.a.get("userId"),W=p.a.get("token");E.a.defaults.headers={"Content-Type":"application/json",token:W,userId:T};var Z={login:function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.post(J+"auth/signIn",{email:t,password:a});case 3:n=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0.response.status);case 9:return 200===n.status&&(p.a.set("token",n.data.token,{expires:100}),p.a.set("username",n.data.username),p.a.set("userId",n.data.userId)),e.abrupt("return",n.status);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),logout:function(){p.a.set("token",""),p.a.set("username",""),p.a.set("userId","")},register:function(){var e=Object(h.a)(f.a.mark((function e(t,a,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.post(J+"auth/signup",{email:t,username:a,password:n});case 3:r=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",e.t0.response.status);case 9:return e.abrupt("return",r.status);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a,n){return e.apply(this,arguments)}}()};function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var Y=function(e){var t=Object(n.useContext)(R).login,a=Object(n.useState)(""),c=Object(i.a)(a,2),o=c[0],s=c[1],l=Object(n.useState)({}),u=Object(i.a)(l,2),m=u[0],d=u[1],b=function(e){e.persist(),d((function(t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,Object(P.a)({},e.target.name,e.target.value))}))};return r.a.createElement("div",{className:"login-container"},r.a.createElement("h1",{className:"login-title"},"Login"),r.a.createElement(I,{error:o}),r.a.createElement("form",{onSubmit:function(a){a.preventDefault();var n=m.email,r=m.password;if(!(m.email.length>4&&m.password.length>4||(s("Invalid email or password!"),0)))return s("Something went wrong!"),!1;Z.login(n,r).then((function(a){if(a>=200&&a<300&&p.a.get("username")&&p.a.get("userId"))return t(),void e.history.push("/")})).catch((function(e){s("Invalid email or password!")}))}},r.a.createElement(N.a,{htmlFor:"email"},"Email"),r.a.createElement(x.a,{id:"email",type:"email",name:"email",onChange:b}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{htmlFor:"password"},"Password"),r.a.createElement(x.a,{id:"password",type:"password",name:"password",onChange:b}),r.a.createElement("br",null),r.a.createElement("div",{className:"login-btn"},r.a.createElement(S.a,{type:"submit",variant:"outlined",color:"primary",className:"login-btn"},"Login"))))},q=function(e,t,a){return a&&a.length<5?"Password should be minimum 5 characters!":t&&t.length<5?"Invalid username!":e&&e.length<=4?"Invalid email!":""};function G(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var H=function(e){p.a.get("token")&&e.history.push("/");var t=Object(n.useState)({}),a=Object(i.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(""),l=Object(i.a)(s,2),u=l[0],m=l[1],d=function(e){e.persist(),o((function(t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?G(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):G(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,Object(P.a)({},e.target.name,e.target.value))}))};return r.a.createElement("div",{className:"login-container"},r.a.createElement("h1",{className:"login-title"},"Register"),r.a.createElement(I,{error:u}),r.a.createElement("form",{onSubmit:function(t){var a=c.email,n=c.username,r=c.password;t.preventDefault();var o=q(a,n,r);""!==o?m(o):Z.register(a,n,r).then((function(t){t>=200&&t<300&&e.history.push("/login")})).catch((function(){m("Invalid data!")}))}},r.a.createElement(N.a,{htmlFor:"email"},"Email"),r.a.createElement(x.a,{id:"email",type:"email",name:"email",onChange:d}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{htmlFor:"username"},"Username"),r.a.createElement(x.a,{id:"username",type:"username",name:"username",onChange:d}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{htmlFor:"password"},"Password"),r.a.createElement(x.a,{id:"password",type:"password",name:"password",onChange:d}),r.a.createElement("br",null),r.a.createElement("div",{className:"login-btn"},r.a.createElement(S.a,{type:"submit",variant:"outlined",color:"primary",className:"login-btn"},"Register"))))};var K=function(){return r.a.createElement("h1",null,"Invalid Route!")},M=function(e,t,a){return e&&t&&a?!a.startsWith("http")&&!a.startsWith("https")||a<10?"Invalid URL!":t.length<35||t.length>200?"Description should be between 35 and 200 characters!":e.length<4||e.length>30?"Name should be between 4 and 30 characters!":"":"Invalid data"};function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var V=function(e){var t=Object(n.useState)({}),a=Object(i.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(""),l=Object(i.a)(s,2),u=l[0],m=l[1],p=function(e){e.persist(),o((function(t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach((function(t){Object(P.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,Object(P.a)({},e.target.name,e.target.value))}))};return r.a.createElement("main",{className:"add-product"},r.a.createElement("h1",null,"Add Product"),r.a.createElement(I,{error:u}),r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=M(c.name,c.description,c.url);if(""!==a)return m(a),!1;w.add(c.name,c.description,c.url).then((function(t){200===t||201===t?e.history.push("/"):m("Product cannot be created!")})).catch((function(t){401===t.status?e.history.push("/login"):409===t.status?m("Name is taken!"):m("Product cannot be created!")}))}},r.a.createElement(N.a,{htmlFor:"name"},"Name"),r.a.createElement(x.a,{id:"name",type:"text",name:"name",onChange:p}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{htmlFor:"description"},"Description"),r.a.createElement(x.a,{id:"description",type:"text",name:"description",onChange:p}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(N.a,{htmlFor:"url"},"URL"),r.a.createElement(x.a,{id:"url",type:"text",name:"url",onChange:p}),r.a.createElement("br",null),r.a.createElement("div",{className:"login-btn"},r.a.createElement(S.a,{type:"submit",variant:"outlined",color:"primary",className:"add-product-btn"},"Add Product"))))},X=(a(83),function(){var e=Object(n.useContext)(R),t=e.logout,a=e.isAuthenticated;return r.a.createElement("nav",{className:"nav"},r.a.createElement(s.b,{to:"/",className:"site-logo"},"PIZZAS"),r.a.createElement("ul",null,a||p.a.get("token")?r.a.createElement(n.Fragment,null,r.a.createElement("li",null,r.a.createElement(s.b,{to:"",onClick:function(){t(),Z.logout()}},"Logout"))):r.a.createElement(n.Fragment,null,r.a.createElement("li",null,r.a.createElement(s.b,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/register"},"Register")))))});var $=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(X,null),r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:k}),r.a.createElement(l.a,{exact:!0,path:"/login",component:Y}),r.a.createElement(l.a,{exact:!0,path:"/register",component:H}),r.a.createElement(l.a,{exact:!0,path:"/product/add",component:V}),r.a.createElement(l.a,{component:K})))};o.a.render(r.a.createElement(U,null,r.a.createElement(s.a,null,r.a.createElement($,null))),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.917f1629.chunk.js.map